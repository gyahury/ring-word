import"./style-B_l4csH6.js";document.addEventListener("DOMContentLoaded",()=>{const p=new URLSearchParams(window.location.search),b=p.get("nickname"),P=p.get("page"),L=document.getElementById("word"),W=document.getElementById("curWordCount"),X=document.getElementById("allWordCount"),Y=document.getElementById("prevButton"),S=document.getElementById("flipButton"),j=document.getElementById("nextButton"),T=document.getElementById("searchButton"),R=document.getElementById("toggleMenuButton"),f=document.getElementById("toggleDrawButton"),c=document.getElementById("controlAutoProgressButton"),$=document.getElementById("shuffleButton"),z=document.getElementById("backButton"),n=document.getElementById("canvas"),r=n.getContext("2d");let s=[],o=0,i=!0,m=!1,g=0,h=0,l;d(),O(),fetch("https://gyahury.github.io/japanese-word/"+b+"/words.json").then(t=>t.json()).then(t=>{s=t.words.filter(e=>e.type===P),X.textContent=s.length,s.length>0&&a(o)}).catch(t=>alert("error occurred : "+t)),window.addEventListener("resize",d),document.addEventListener("keydown",function(t){t.key==="ArrowLeft"?(d(),x()):t.key==="ArrowRight"?(d(),E()):(t.key==="ArrowUp"||t.key==="ArrowDown")&&w()}),Y.addEventListener("click",()=>{d(),x()}),j.addEventListener("click",()=>{d(),E()}),S.addEventListener("click",()=>{w()}),T.addEventListener("click",()=>{const e=`https://ja.dict.naver.com/?m=mobile#/search?query=${s[o].word}`;window.open(e,"_blank")}),R.addEventListener("click",v),f.addEventListener("click",F),c.addEventListener("click",G),$.addEventListener("click",()=>{confirm("would you like to shuffle?")&&(o=0,i=!0,d(),H(s),a(o),v())}),z.addEventListener("click",()=>{_()});function a(t){const e=s[t];i?L.innerHTML=`${e.word}`:L.innerHTML=`${e.furigana}<div style='font-size: clamp(0.7rem, 6vw, 2rem);'>${e.meaning}</div>`,W.textContent=t+1}function x(){o>0?(o--,i=!0,a(o)):o==0&&(o=s.length-1,i=!0,a(o))}function E(){o<s.length-1?(o++,i=!0,a(o)):o==s.length-1&&(o=0,i=!0,a(o))}function w(){i=!i,a(o)}function v(){const t=document.getElementById("toggleMenuButton"),e=t.parentNode.nextElementSibling,u=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!u),e.style.display=u?"none":"block"}function H(t){for(let e=t.length-1;e>0;e--){const u=Math.floor(Math.random()*(e+1));[t[e],t[u]]=[t[u],t[e]]}}function U(t,e){r.beginPath(),r.moveTo(g,h),r.lineTo(t,e),r.lineWidth=3,r.lineCap="round",r.strokeStyle="RGBA(169, 169, 169, 1)",r.stroke()}function k(t){g=t.offsetX,h=t.offsetY,m=!0}function y(t){if(!m)return;let e=t.offsetX,u=t.offsetY;U(e,u),g=e,h=u}function C(){m=!1}function A(){m=!1}function I(t){if(t.touches.length==1){const e=t.touches[0],u=new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY});n.dispatchEvent(u)}t.preventDefault()}function D(t){if(t.touches.length==1){const e=t.touches[0],u=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});n.dispatchEvent(u)}t.preventDefault()}function M(t){const e=new MouseEvent("mouseup",{});n.dispatchEvent(e),t.preventDefault()}function d(){var t=window.devicePixelRatio;n.width=n.clientWidth*t,n.height=n.clientHeight*t,r.scale(t,t)}function O(){n.addEventListener("mousedown",k),n.addEventListener("mouseup",C),n.addEventListener("mousemove",y),n.addEventListener("mouseout",A),n.addEventListener("touchstart",I),n.addEventListener("touchmove",D),n.addEventListener("touchend",M)}function N(){n.removeEventListener("mousedown",k),n.removeEventListener("mouseup",C),n.removeEventListener("mousemove",y),n.removeEventListener("mouseout",A),n.removeEventListener("touchstart",I),n.removeEventListener("touchmove",D),n.removeEventListener("touchend",M)}function B(t){return l&&clearInterval(l),l=setInterval(()=>{w(),setTimeout(E,t/2)},t),l}function q(){l&&(clearInterval(l),l=null)}function F(){f.textContent==="Draw Off"?(N(),f.textContent="Draw On"):(O(),f.textContent="Draw Off"),d(),v()}function G(){c.textContent==="Auto Off"?(q(),c.textContent="Auto x1 On",v()):c.textContent==="Auto x1 On"?(B(4e3),c.textContent="Auto x2 On"):c.textContent==="Auto x2 On"?(B(2e3),c.textContent="Auto x4 On"):c.textContent==="Auto x4 On"&&(B(1e3),c.textContent="Auto Off")}function _(){window.history.back()}});
