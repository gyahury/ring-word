import"./style-B_l4csH6.js";document.addEventListener("DOMContentLoaded",()=>{const h=new URLSearchParams(window.location.search),M=h.get("nickname"),x=h.get("page"),g=document.getElementById("word"),I=document.getElementById("curWordCount"),C=document.getElementById("allWordCount"),b=document.getElementById("prevButton"),W=document.getElementById("flipButton"),X=document.getElementById("nextButton"),Y=document.getElementById("searchButton"),A=document.getElementById("toggleMenuButton"),l=document.getElementById("toggleDrawButton"),S=document.getElementById("shuffleButton"),j=document.getElementById("backButton"),o=document.getElementById("canvas"),s=o.getContext("2d");let c=[],t=0,u=!0,a=!1,m=0,f=0;d(),D(),fetch("https://gyahury.github.io/japanese-word/"+M+"/words.json").then(e=>e.json()).then(e=>{c=e.words.filter(n=>n.type===x),C.textContent=c.length,c.length>0&&i(t)}).catch(e=>alert("error occurred : "+e)),window.addEventListener("resize",d),document.addEventListener("keydown",function(e){e.key==="ArrowLeft"?(d(),t>0?(t--,u=!0,i(t)):t==0&&(t=c.length-1,u=!0,i(t))):e.key==="ArrowRight"?(d(),t<c.length-1?(t++,u=!0,i(t)):t==c.length-1&&(t=0,u=!0,i(t))):(e.key==="ArrowUp"||e.key==="ArrowDown")&&(u=!u,i(t))}),b.addEventListener("click",()=>{d(),t>0?(t--,u=!0,i(t)):t==0&&(t=c.length-1,u=!0,i(t))}),X.addEventListener("click",()=>{d(),t<c.length-1?(t++,u=!0,i(t)):t==c.length-1&&(t=0,u=!0,i(t))}),W.addEventListener("click",()=>{u=!u,i(t)}),Y.addEventListener("click",()=>{const n=`https://ja.dict.naver.com/?m=mobile#/search?query=${c[t].word}`;window.open(n,"_blank")}),A.addEventListener("click",v),l.addEventListener("click",$),S.addEventListener("click",()=>{confirm("would you like to shuffle?")&&(t=0,u=!0,d(),P(c),i(t),v())}),j.addEventListener("click",()=>{z()});function i(e){const n=c[e];u?g.innerHTML=`${n.word}`:g.innerHTML=`${n.furigana}<div style='font-size: clamp(0.7rem, 6vw, 2rem);'>${n.meaning}</div>`,I.textContent=e+1}function v(){const e=document.getElementById("toggleMenuButton"),n=e.parentNode.nextElementSibling,r=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!r),n.style.display=r?"none":"block"}function P(e){for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}}function R(e,n){s.beginPath(),s.moveTo(m,f),s.lineTo(e,n),s.lineWidth=3,s.lineCap="round",s.strokeStyle="RGBA(169, 169, 169, 1)",s.stroke()}function E(e){m=e.offsetX,f=e.offsetY,a=!0}function w(e){if(!a)return;let n=e.offsetX,r=e.offsetY;R(n,r),m=n,f=r}function B(){a=!1}function p(){a=!1}function L(e){if(e.touches.length==1){const n=e.touches[0],r=new MouseEvent("mousedown",{clientX:n.clientX,clientY:n.clientY});o.dispatchEvent(r)}e.preventDefault()}function k(e){if(e.touches.length==1){const n=e.touches[0],r=new MouseEvent("mousemove",{clientX:n.clientX,clientY:n.clientY});o.dispatchEvent(r)}e.preventDefault()}function y(e){const n=new MouseEvent("mouseup",{});o.dispatchEvent(n),e.preventDefault()}function d(){var e=window.devicePixelRatio;o.width=o.clientWidth*e,o.height=o.clientHeight*e,s.scale(e,e)}function D(){o.addEventListener("mousedown",E),o.addEventListener("mouseup",B),o.addEventListener("mousemove",w),o.addEventListener("mouseout",p),o.addEventListener("touchstart",L),o.addEventListener("touchmove",k),o.addEventListener("touchend",y)}function T(){o.removeEventListener("mousedown",E),o.removeEventListener("mouseup",B),o.removeEventListener("mousemove",w),o.removeEventListener("mouseout",p),o.removeEventListener("touchstart",L),o.removeEventListener("touchmove",k),o.removeEventListener("touchend",y)}function $(){l.textContent==="Draw off"?(T(),l.textContent="Draw on"):(D(),l.textContent="Draw off"),d(),v()}function z(){window.history.back()}});
