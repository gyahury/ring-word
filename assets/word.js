import"./style-B_l4csH6.js";document.addEventListener("DOMContentLoaded",()=>{const h=new URLSearchParams(window.location.search),f=h.get("nickname"),w=h.get("page"),v=document.getElementById("word"),E=document.getElementById("curWordCount"),g=document.getElementById("allWordCount"),p=document.getElementById("prevButton"),L=document.getElementById("flipButton"),B=document.getElementById("nextButton"),y=document.getElementById("dictButton"),o=document.getElementById("canvas"),r=o.getContext("2d");let c=[],n=0,s=!0,i=!1,l=0,m=0;a(),fetch("https://gyahury.github.io/japanese-word/"+f+"/words.json").then(t=>t.json()).then(t=>{c=t.words.filter(e=>e.type===w),g.textContent=c.length,c.length>0&&u(n)}).catch(t=>alert("error occurred : "+t)),window.addEventListener("resize",a),o.addEventListener("mousedown",k),o.addEventListener("mouseup",I),o.addEventListener("mousemove",C),o.addEventListener("mouseout",M),o.addEventListener("touchstart",X),o.addEventListener("touchmove",Y),o.addEventListener("touchend",D),p.addEventListener("click",()=>{a(),n>0?(n--,s=!0,u(n)):n==0&&(n=c.length-1,s=!0,u(n))}),B.addEventListener("click",()=>{a(),n<c.length-1?(n++,s=!0,u(n)):n==c.length-1&&(n=0,s=!0,u(n))}),L.addEventListener("click",()=>{s=!s,u(n)}),y.addEventListener("click",()=>{const e=`https://ja.dict.naver.com/?m=mobile#/search?query=${c[n].word}`;window.open(e,"_blank")});function u(t){const e=c[t];s?v.innerHTML=`${e.word}`:v.innerHTML=`${e.furigana}<div style='font-size: clamp(0.7rem, 6vw, 2rem);'>${e.meaning}</div>`,E.textContent=t+1}function W(t,e){r.beginPath(),r.moveTo(l,m),r.lineTo(t,e),r.lineWidth=1,r.strokeStyle="gray",r.stroke()}function k(t){l=t.offsetX,m=t.offsetY,i=!0}function C(t){if(!i)return;let e=t.offsetX,d=t.offsetY;W(e,d),l=e,m=d}function I(){i=!1}function M(){i=!1}function X(t){if(t.touches.length==1){const e=t.touches[0],d=new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY});o.dispatchEvent(d)}t.preventDefault()}function Y(t){if(t.touches.length==1){const e=t.touches[0],d=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});o.dispatchEvent(d)}t.preventDefault()}function D(t){const e=new MouseEvent("mouseup",{});o.dispatchEvent(e),t.preventDefault()}function a(){o.width=window.innerWidth,o.height=window.innerHeight}});
