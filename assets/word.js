import"./style-B_l4csH6.js";document.addEventListener("DOMContentLoaded",()=>{const h=new URLSearchParams(window.location.search),C=h.get("nickname"),I=h.get("page"),g=document.getElementById("word"),b=document.getElementById("curWordCount"),W=document.getElementById("allWordCount"),X=document.getElementById("prevButton"),Y=document.getElementById("flipButton"),A=document.getElementById("nextButton"),S=document.getElementById("searchButton"),j=document.getElementById("toggleMenuButton"),l=document.getElementById("toggleDrawButton"),P=document.getElementById("shuffleButton"),R=document.getElementById("backButton"),n=document.getElementById("canvas"),s=n.getContext("2d");let i=[],o=0,u=!0,a=!1,m=0,f=0;d(),M(),fetch("https://gyahury.github.io/japanese-word/"+C+"/words.json").then(e=>e.json()).then(e=>{i=e.words.filter(t=>t.type===I),W.textContent=i.length,i.length>0&&r(o)}).catch(e=>alert("error occurred : "+e)),window.addEventListener("resize",d),document.addEventListener("keydown",function(e){e.key==="ArrowLeft"?(d(),w()):e.key==="ArrowRight"?(d(),E()):(e.key==="ArrowUp"||e.key==="ArrowDown")&&(u=!u,r(o))}),X.addEventListener("click",()=>{d(),w()}),A.addEventListener("click",()=>{d(),E()}),Y.addEventListener("click",()=>{u=!u,r(o)}),S.addEventListener("click",()=>{const t=`https://ja.dict.naver.com/?m=mobile#/search?query=${i[o].word}`;window.open(t,"_blank")}),j.addEventListener("click",v),l.addEventListener("click",H),P.addEventListener("click",()=>{confirm("would you like to shuffle?")&&(o=0,u=!0,d(),T(i),r(o),v())}),R.addEventListener("click",()=>{U()});function r(e){const t=i[e];u?g.innerHTML=`${t.word}`:g.innerHTML=`${t.furigana}<div style='font-size: clamp(0.7rem, 6vw, 2rem);'>${t.meaning}</div>`,b.textContent=e+1}function E(){o<i.length-1?(o++,u=!0,r(o)):o==i.length-1&&(o=0,u=!0,r(o))}function w(){o>0?(o--,u=!0,r(o)):o==0&&(o=i.length-1,u=!0,r(o))}function v(){const e=document.getElementById("toggleMenuButton"),t=e.parentNode.nextElementSibling,c=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!c),t.style.display=c?"none":"block"}function T(e){for(let t=e.length-1;t>0;t--){const c=Math.floor(Math.random()*(t+1));[e[t],e[c]]=[e[c],e[t]]}}function $(e,t){s.beginPath(),s.moveTo(m,f),s.lineTo(e,t),s.lineWidth=3,s.lineCap="round",s.strokeStyle="RGBA(169, 169, 169, 1)",s.stroke()}function B(e){m=e.offsetX,f=e.offsetY,a=!0}function p(e){if(!a)return;let t=e.offsetX,c=e.offsetY;$(t,c),m=t,f=c}function L(){a=!1}function k(){a=!1}function y(e){if(e.touches.length==1){const t=e.touches[0],c=new MouseEvent("mousedown",{clientX:t.clientX,clientY:t.clientY});n.dispatchEvent(c)}e.preventDefault()}function D(e){if(e.touches.length==1){const t=e.touches[0],c=new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY});n.dispatchEvent(c)}e.preventDefault()}function x(e){const t=new MouseEvent("mouseup",{});n.dispatchEvent(t),e.preventDefault()}function d(){var e=window.devicePixelRatio;n.width=n.clientWidth*e,n.height=n.clientHeight*e,s.scale(e,e)}function M(){n.addEventListener("mousedown",B),n.addEventListener("mouseup",L),n.addEventListener("mousemove",p),n.addEventListener("mouseout",k),n.addEventListener("touchstart",y),n.addEventListener("touchmove",D),n.addEventListener("touchend",x)}function z(){n.removeEventListener("mousedown",B),n.removeEventListener("mouseup",L),n.removeEventListener("mousemove",p),n.removeEventListener("mouseout",k),n.removeEventListener("touchstart",y),n.removeEventListener("touchmove",D),n.removeEventListener("touchend",x)}function H(){l.textContent==="Draw off"?(z(),l.textContent="Draw on"):(M(),l.textContent="Draw off"),d(),v()}function U(){window.history.back()}});
