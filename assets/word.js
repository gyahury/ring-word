import"./style-B_l4csH6.js";document.addEventListener("DOMContentLoaded",()=>{const h=new URLSearchParams(window.location.search),M=h.get("nickname"),x=h.get("page"),g=document.getElementById("word"),I=document.getElementById("curWordCount"),C=document.getElementById("allWordCount"),b=document.getElementById("prevButton"),W=document.getElementById("flipButton"),X=document.getElementById("nextButton"),Y=document.getElementById("searchButton"),S=document.getElementById("toggleMenuButton"),l=document.getElementById("toggleDrawButton"),j=document.getElementById("shuffleButton"),P=document.getElementById("backButton"),n=document.getElementById("canvas"),s=n.getContext("2d");let u=[],o=0,i=!0,a=!1,m=0,v=0;d(),D(),fetch("https://gyahury.github.io/japanese-word/"+M+"/words.json").then(e=>e.json()).then(e=>{u=e.words.filter(t=>t.type===x),C.textContent=u.length,u.length>0&&r(o)}).catch(e=>alert("error occurred : "+e)),window.addEventListener("resize",d),b.addEventListener("click",()=>{d(),o>0?(o--,i=!0,r(o)):o==0&&(o=u.length-1,i=!0,r(o))}),X.addEventListener("click",()=>{d(),o<u.length-1?(o++,i=!0,r(o)):o==u.length-1&&(o=0,i=!0,r(o))}),W.addEventListener("click",()=>{i=!i,r(o)}),Y.addEventListener("click",()=>{const t=`https://ja.dict.naver.com/?m=mobile#/search?query=${u[o].word}`;window.open(t,"_blank")}),S.addEventListener("click",f),l.addEventListener("click",A),j.addEventListener("click",()=>{confirm("would you like to shuffle?")&&(o=0,i=!0,d(),T(u),r(o),f())}),P.addEventListener("click",()=>{H()});function r(e){const t=u[e];i?g.innerHTML=`${t.word}`:g.innerHTML=`${t.furigana}<div style='font-size: clamp(0.7rem, 6vw, 2rem);'>${t.meaning}</div>`,I.textContent=e+1}function f(){const e=document.getElementById("toggleMenuButton"),t=e.parentNode.nextElementSibling,c=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!c),t.style.display=c?"none":"block"}function T(e){for(let t=e.length-1;t>0;t--){const c=Math.floor(Math.random()*(t+1));[e[t],e[c]]=[e[c],e[t]]}}function $(e,t){s.beginPath(),s.moveTo(m,v),s.lineTo(e,t),s.lineWidth=3,s.lineCap="round",s.strokeStyle="RGBA(169, 169, 169, 1)",s.stroke()}function E(e){m=e.offsetX,v=e.offsetY,a=!0}function w(e){if(!a)return;let t=e.offsetX,c=e.offsetY;$(t,c),m=t,v=c}function B(){a=!1}function p(){a=!1}function L(e){if(e.touches.length==1){const t=e.touches[0],c=new MouseEvent("mousedown",{clientX:t.clientX,clientY:t.clientY});n.dispatchEvent(c)}e.preventDefault()}function k(e){if(e.touches.length==1){const t=e.touches[0],c=new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY});n.dispatchEvent(c)}e.preventDefault()}function y(e){const t=new MouseEvent("mouseup",{});n.dispatchEvent(t),e.preventDefault()}function d(){var e=window.devicePixelRatio;n.width=n.clientWidth*e,n.height=n.clientHeight*e,s.scale(e,e)}function D(){n.addEventListener("mousedown",E),n.addEventListener("mouseup",B),n.addEventListener("mousemove",w),n.addEventListener("mouseout",p),n.addEventListener("touchstart",L),n.addEventListener("touchmove",k),n.addEventListener("touchend",y)}function z(){n.removeEventListener("mousedown",E),n.removeEventListener("mouseup",B),n.removeEventListener("mousemove",w),n.removeEventListener("mouseout",p),n.removeEventListener("touchstart",L),n.removeEventListener("touchmove",k),n.removeEventListener("touchend",y)}function A(){l.textContent==="Draw off"?(z(),l.textContent="Draw on"):(D(),l.textContent="Draw off"),d(),f()}function H(){window.history.back()}});
