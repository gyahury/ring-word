import"./style-B_l4csH6.js";document.addEventListener("DOMContentLoaded",()=>{const v=new URLSearchParams(window.location.search),f=v.get("nickname"),E=v.get("page"),h=document.getElementById("word"),g=document.getElementById("curWordCount"),w=document.getElementById("allWordCount"),p=document.getElementById("prevButton"),L=document.getElementById("flipButton"),B=document.getElementById("nextButton"),y=document.getElementById("dictButton"),n=document.getElementById("canvas"),s=n.getContext("2d");let c=[],o=0,i=!0,d=!1,l=0,m=0;a(),fetch("https://gyahury.github.io/japanese-word/"+f+"/words.json").then(t=>t.json()).then(t=>{c=t.words.filter(e=>e.type===E),w.textContent=c.length,c.length>0&&r(o)}).catch(t=>alert("error occurred : "+t)),window.addEventListener("resize",a),n.addEventListener("mousedown",k),n.addEventListener("mouseup",I),n.addEventListener("mousemove",C),n.addEventListener("mouseout",M),n.addEventListener("touchstart",X),n.addEventListener("touchmove",Y),n.addEventListener("touchend",x),p.addEventListener("click",()=>{a(),o>0?(o--,i=!0,r(o)):o==0&&(o=c.length-1,i=!0,r(o))}),B.addEventListener("click",()=>{a(),o<c.length-1?(o++,i=!0,r(o)):o==c.length-1&&(o=0,i=!0,r(o))}),L.addEventListener("click",()=>{i=!i,r(o)}),y.addEventListener("click",()=>{const e=`https://ja.dict.naver.com/?m=mobile#/search?query=${c[o].word}`;window.open(e,"_blank")});function r(t){const e=c[t];i?h.innerHTML=`${e.word}`:h.innerHTML=`${e.furigana}<div style='font-size: clamp(0.7rem, 6vw, 2rem);'>${e.meaning}</div>`,g.textContent=t+1}function W(t,e){s.beginPath(),s.moveTo(l,m),s.lineTo(t,e),s.lineWidth=1,s.strokeStyle="gray",s.stroke()}function k(t){l=t.offsetX,m=t.offsetY,d=!0}function C(t){if(!d)return;let e=t.offsetX,u=t.offsetY;W(e,u),l=e,m=u}function I(){d=!1}function M(){d=!1}function X(t){if(t.touches.length==1){const e=t.touches[0],u=new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY});n.dispatchEvent(u)}t.preventDefault()}function Y(t){if(t.touches.length==1){const e=t.touches[0],u=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});n.dispatchEvent(u)}t.preventDefault()}function x(t){const e=new MouseEvent("mouseup",{});n.dispatchEvent(e),t.preventDefault()}function a(){var t=window.devicePixelRatio;n.width=n.clientWidth*t,n.height=n.clientHeight*t,s.scale(t,t)}});
