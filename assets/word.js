import"./style-B_l4csH6.js";document.addEventListener("DOMContentLoaded",()=>{const x=new URLSearchParams(window.location.search),W=x.get("nickname"),P=x.get("page"),p=document.getElementById("word"),X=document.getElementById("curWordCount"),L=document.getElementById("allWordCount"),Y=document.getElementById("prevButton"),S=document.getElementById("flipButton"),j=document.getElementById("nextButton"),T=document.getElementById("searchButton"),R=document.getElementById("toggleMenuButton"),f=document.getElementById("toggleDrawButton"),i=document.getElementById("controlAutoProgressButton"),$=document.getElementById("shuffleButton"),z=document.getElementById("excludeWordButton"),H=document.getElementById("backButton"),n=document.getElementById("canvas"),d=n.getContext("2d");let u=[],o=0,r=!0,m=!1,v=0,g=0,a;l(),O(),fetch("https://gyahury.github.io/japanese-word/"+W+"/words.json").then(t=>t.json()).then(t=>{u=t.words.filter(e=>e.type===P),L.textContent=u.length,u.length>0&&s(o)}).catch(t=>alert("error occurred : "+t)),window.addEventListener("resize",l),document.addEventListener("keydown",function(t){t.key==="ArrowLeft"?(l(),y()):t.key==="ArrowRight"?(l(),h()):(t.key==="ArrowUp"||t.key==="ArrowDown")&&E()}),Y.addEventListener("click",()=>{l(),y()}),j.addEventListener("click",()=>{l(),h()}),S.addEventListener("click",()=>{E()}),T.addEventListener("click",()=>{const e=`https://ja.dict.naver.com/?m=mobile#/search?query=${u[o].word}`;window.open(e,"_blank")}),R.addEventListener("click",w),f.addEventListener("click",G),i.addEventListener("click",J),z.addEventListener("click",U),$.addEventListener("click",()=>{confirm("would you like to shuffle?")&&(o=0,r=!0,l(),N(u),s(o),w())}),H.addEventListener("click",()=>{confirm("are you sure you want to go back? unsaved changes will be lost")&&K()});function s(t){const e=u[t];r?p.innerHTML=`${e.word}`:p.innerHTML=`${e.furigana}<div style='font-size: clamp(0.7rem, 6vw, 2rem);'>${e.meaning}</div>`,X.textContent=t+1}function U(){confirm("would you like to exclude this word? it will be temporarily excluded")&&(u=u.filter((t,e)=>e!==o),o==u.length?(o=0,r=!0,s(o)):(r=!0,s(o)),L.textContent=u.length,w())}function y(){o>0?(o--,r=!0,s(o)):o==0&&(o=u.length-1,r=!0,s(o))}function h(){o<u.length-1?(o++,r=!0,s(o)):o==u.length-1&&(o=0,r=!0,s(o))}function E(){r=!r,s(o)}function w(){const t=document.getElementById("toggleMenuButton"),e=t.parentNode.nextElementSibling,c=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!c),e.style.display=c?"none":"block"}function N(t){for(let e=t.length-1;e>0;e--){const c=Math.floor(Math.random()*(e+1));[t[e],t[c]]=[t[c],t[e]]}}function _(t,e){d.beginPath(),d.moveTo(v,g),d.lineTo(t,e),d.lineWidth=3,d.lineCap="round",d.strokeStyle="RGBA(169, 169, 169, 1)",d.stroke()}function k(t){v=t.offsetX,g=t.offsetY,m=!0}function C(t){if(!m)return;let e=t.offsetX,c=t.offsetY;_(e,c),v=e,g=c}function A(){m=!1}function I(){m=!1}function D(t){if(t.touches.length==1){const e=t.touches[0],c=new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY});n.dispatchEvent(c)}t.preventDefault()}function M(t){if(t.touches.length==1){const e=t.touches[0],c=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});n.dispatchEvent(c)}t.preventDefault()}function b(t){const e=new MouseEvent("mouseup",{});n.dispatchEvent(e),t.preventDefault()}function l(){var t=window.devicePixelRatio;n.width=n.clientWidth*t,n.height=n.clientHeight*t,d.scale(t,t)}function O(){n.addEventListener("mousedown",k),n.addEventListener("mouseup",A),n.addEventListener("mousemove",C),n.addEventListener("mouseout",I),n.addEventListener("touchstart",D),n.addEventListener("touchmove",M),n.addEventListener("touchend",b)}function q(){n.removeEventListener("mousedown",k),n.removeEventListener("mouseup",A),n.removeEventListener("mousemove",C),n.removeEventListener("mouseout",I),n.removeEventListener("touchstart",D),n.removeEventListener("touchmove",M),n.removeEventListener("touchend",b)}function B(t){return a&&clearInterval(a),a=setInterval(()=>{E(),setTimeout(h,t/2)},t),a}function F(){a&&(clearInterval(a),a=null)}function G(){f.textContent==="Draw Off"?(q(),f.textContent="Draw On"):(O(),f.textContent="Draw Off"),l()}function J(){i.textContent==="Auto Off"?(F(),i.textContent="Auto x1 On"):i.textContent==="Auto x1 On"?(B(4e3),i.textContent="Auto x2 On"):i.textContent==="Auto x2 On"?(B(2e3),i.textContent="Auto x4 On"):i.textContent==="Auto x4 On"&&(B(1e3),i.textContent="Auto Off")}function K(){window.history.back()}});
